<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
     "http://www.w3.org/TR/html4/strict.dtd">

<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html">
    <title><& SELF:title, %ARGS &></title>
    <link href="<& SELF:base &>fist.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <div id="nav">
      <& nav.mas &>
% if ( $User->isvalid ) {
      <& user_nav.mas &>
% } else {
      <& login_box.mas, %ARGS &>
% }
    </div>
    <div id="body">
% $m->call_next;
      <hr>
    <address>
      <a href="mailto:mmilligan AT astro.umn.edu">Michael Milligan</a><br>
      <a href="mailto:sperkins@nmu.edu">Sam Perkins-Harbin</a> (1337 page redux designer)
    </address>
    <p><& SELF:time_stamp &></p>
    </div>

  </body>
</html>

<%shared>

$User = PageCapt::Web::extract_cookie( $m->cgi_object() ) ||
  blank PageCapt::User;

</%shared>

<%init>

if ($ARGS{logout}) {
  $r->header_out( 'Set-cookie' =>
		  PageCapt::Web::logout_cookie() );
  $User->invalidate;
} else {
  $User->login($ARGS{loginname});
  $User->validate_password($ARGS{password});
  $ARGS{attempt} = undef if $User->isvalid;

  my $cookie = PageCapt::Web::new_cookie( $User );
  if ($cookie) {
    $r->header_out( 'Set-Cookie' => $cookie );
  }

}

</%init>


<%method time_stamp>
<!-- hhmts start -->
Last modified: Wed May  7 15:37:54 CDT 2003
<!-- hhmts end -->
</%method>

<%method title>
FIST: Deleuzean Potato
</%method>

<%method base>/\
</%method>

<%flags>
inherit => undef
</%flags>